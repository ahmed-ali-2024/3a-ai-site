# دليل استخدام Keystatic - لوحة التحكم المحلية

> دليل مفصّل لإدارة محتوى الموقع باستخدام Keystatic

---

## 📋 جدول المحتويات

1. [مقدمة عن Keystatic](#مقدمة-عن-keystatic)
2. [الوصول إلى لوحة التحكم](#الوصول-إلى-لوحة-التحكم)
3. [واجهة المستخدم](#واجهة-المستخدم)
4. [إدارة الخدمات](#إدارة-الخدمات)
5. [إدارة معرض الأعمال](#إدارة-معرض-الأعمال)
6. [إدارة الصفحات](#إدارة-الصفحات)
7. [إدارة الصور](#إدارة-الصور)
8. [نصائح وحيل](#نصائح-وحيل)

---

## 🎯 مقدمة عن Keystatic

### ما هو Keystatic؟

**Keystatic** هو نظام إدارة محتوى (CMS) محلي مفتوح المصدر يعمل مباشرة في بيئة التطوير. على عكس أنظمة CMS التقليدية:

✅ **لا يحتاج قاعدة بيانات** - يحفظ المحتوى في ملفات نصية  
✅ **يعمل محلياً** - لا يحتاج اتصال بالإنترنت  
✅ **متكامل مع Git** - كل تغيير يُحفظ في Git  
✅ **واجهة مرئية** - سهل الاستخدام بدون معرفة تقنية

### لماذا Keystatic؟

- **سهولة الاستخدام**: واجهة بسيطة وواضحة
- **الأمان**: لا توجد قاعدة بيانات قابلة للاختراق
- **السرعة**: لا توجد استعلامات قاعدة بيانات
- **التحكم الكامل**: كل شيء في ملفات نصية

---

## 🚪 الوصول إلى لوحة التحكم

### الخطوة 1: تشغيل الموقع

افتح Terminal وشغّل:

```bash
npm run dev
```

ستظهر رسالة مثل:
```
🚀 astro v5.16.3 started in 234ms

  ┃ Local    http://localhost:4321/
  ┃ Network  use --host to expose
```

### الخطوة 2: فتح لوحة التحكم

افتح المتصفح وانتقل إلى:
```
http://localhost:4321/keystatic
```

### الخطوة 3: الواجهة الرئيسية

ستظهر لك الواجهة الرئيسية مع القوائم التالية:

```
┌─────────────────────────────────────┐
│  Keystatic                          │
├─────────────────────────────────────┤
│                                     │
│  📋 إعدادات الموقع                 │
│  ─────────────────────────          │
│  📝 المقالات والمشاريع             │
│  📄 الصفحات الثابتة                │
│  👤 المؤلفون                        │
│  🛠️ الخدمات                        │
│  💼 معرض الأعمال                   │
│                                     │
└─────────────────────────────────────┘
```

---

## 🖥️ واجهة المستخدم

### القائمة الجانبية

```
┌──────────────────────┐
│  Collections         │
├──────────────────────┤
│  ⚙️ إعدادات الموقع  │  ← Singleton (إعدادات واحدة)
│                      │
│  📚 Collections      │
│  ├─ 📝 المقالات     │  ← Blog posts
│  ├─ 📄 الصفحات      │  ← Static pages
│  ├─ 👤 المؤلفون     │  ← Authors
│  ├─ 🛠️ الخدمات     │  ← Services
│  └─ 💼 الأعمال      │  ← Portfolio
└──────────────────────┘
```

### شريط الأدوات العلوي

```
┌────────────────────────────────────────────┐
│  [← Back]  [Save]  [Preview]  [Delete]    │
└────────────────────────────────────────────┘
```

- **Back**: العودة للقائمة الرئيسية
- **Save**: حفظ التغييرات
- **Preview**: معاينة المحتوى
- **Delete**: حذف المحتوى

---

## 🛠️ إدارة الخدمات

### عرض جميع الخدمات

1. اضغط على **"الخدمات"** من القائمة الجانبية
2. ستظهر قائمة بجميع الخدمات الموجودة:

```
┌─────────────────────────────────────────┐
│  الخدمات                    [+ Create]  │
├─────────────────────────────────────────┤
│                                         │
│  🌐 تصميم وتطوير مواقع الويب           │
│     Order: 4                            │
│                                         │
│  📱 تطوير تطبيقات متعددة المنصات       │
│     Order: 3                            │
│                                         │
│  ☁️ Backend as a Service               │
│     Order: 2                            │
│                                         │
└─────────────────────────────────────────┘
```

### إنشاء خدمة جديدة

#### الخطوة 1: اضغط على "Create Service"

#### الخطوة 2: املأ النموذج

```
┌─────────────────────────────────────────┐
│  Create Service                         │
├─────────────────────────────────────────┤
│                                         │
│  الرابط (Slug) *                       │
│  ┌─────────────────────────────────┐   │
│  │ ai-consulting                   │   │
│  └─────────────────────────────────┘   │
│                                         │
│  عنوان الخدمة *                        │
│  ┌─────────────────────────────────┐   │
│  │ استشارات الذكاء الاصطناعي      │   │
│  └─────────────────────────────────┘   │
│                                         │
│  وصف الخدمة *                          │
│  ┌─────────────────────────────────┐   │
│  │ نقدم استشارات متخصصة في        │   │
│  │ تطبيقات الذكاء الاصطناعي...    │   │
│  └─────────────────────────────────┘   │
│                                         │
│  أيقونة الخدمة (Emoji)                 │
│  ┌─────────────────────────────────┐   │
│  │ 🤖                              │   │
│  └─────────────────────────────────┘   │
│                                         │
│  صورة الخدمة                           │
│  [📁 Upload Image]                     │
│                                         │
│  مميزات الخدمة                         │
│  ┌─────────────────────────────────┐   │
│  │ + Add Feature                   │   │
│  │ - تحليل البيانات                │   │
│  │ - بناء نماذج AI                 │   │
│  │ - تدريب الفرق                   │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ترتيب العرض                           │
│  ┌─────────────────────────────────┐   │
│  │ 1                               │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ☐ مسودة؟                              │
│                                         │
│  تفاصيل الخدمة (Markdown)              │
│  ┌─────────────────────────────────┐   │
│  │ ## نبذة عن الخدمة               │   │
│  │                                 │   │
│  │ نقدم استشارات شاملة...         │   │
│  └─────────────────────────────────┘   │
│                                         │
│  [Cancel]              [Save]          │
└─────────────────────────────────────────┘
```

#### الخطوة 3: شرح الحقول

##### 1. الرابط (Slug) *مطلوب*
- معرّف فريد للخدمة في الرابط
- يجب أن يكون بالإنجليزية
- استخدم الشرطة `-` بدلاً من المسافات
- **مثال**: `ai-consulting`, `web-development`

##### 2. عنوان الخدمة *مطلوب*
- الاسم الظاهر للخدمة
- يمكن أن يكون بالعربية
- **مثال**: `استشارات الذكاء الاصطناعي`

##### 3. وصف الخدمة *مطلوب*
- وصف مختصر (2-3 أسطر)
- يظهر في بطاقة الخدمة
- **مثال**: `نقدم استشارات متخصصة في تطبيقات الذكاء الاصطناعي`

##### 4. أيقونة الخدمة
- رمز تعبيري (Emoji) يمثل الخدمة
- **أمثلة**: 🤖 💻 🌐 📱 ☁️ 🎨

##### 5. صورة الخدمة
- صورة توضيحية للخدمة
- **الحجم المفضل**: 800x600 بكسل
- **الصيغة**: `.webp` أو `.jpg`

##### 6. مميزات الخدمة
- قائمة بمميزات الخدمة
- اضغط "+ Add Feature" لإضافة ميزة جديدة
- **مثال**:
  ```
  - تحليل البيانات
  - بناء نماذج AI
  - تدريب الفرق
  ```

##### 7. ترتيب العرض
- رقم لترتيب الخدمات في الصفحة
- الأرقام الأصغر تظهر أولاً
- **مثال**: `1`, `2`, `3`

##### 8. مسودة؟
- إذا كانت محددة ☑، الخدمة لن تظهر في الموقع
- استخدمها للخدمات قيد الإعداد

##### 9. تفاصيل الخدمة
- محتوى تفصيلي بصيغة Markdown
- يظهر في صفحة الخدمة الكاملة
- يدعم:
  - العناوين: `## عنوان`
  - القوائم: `- عنصر`
  - الروابط: `[نص](رابط)`
  - الصور: `![وصف](مسار)`

#### الخطوة 4: حفظ الخدمة

1. اضغط على زر **"Save"** أعلى الصفحة
2. سيتم إنشاء ملف جديد في `src/content/services/`
3. ستعود تلقائياً لقائمة الخدمات

#### الخطوة 5: معاينة النتيجة

1. افتح `http://localhost:4321/services`
2. ستجد الخدمة الجديدة ظاهرة
3. اضغط عليها لرؤية الصفحة الكاملة

---

### تعديل خدمة موجودة

1. اضغط على **"الخدمات"** من القائمة
2. اضغط على الخدمة التي تريد تعديلها
3. عدّل الحقول المطلوبة
4. اضغط **"Save"**

### حذف خدمة

1. افتح الخدمة المراد حذفها
2. اضغط على زر **"Delete"** أعلى الصفحة
3. أكّد الحذف

**تحذير**: الحذف نهائي ولا يمكن التراجع عنه!

---

## 💼 إدارة معرض الأعمال

### إنشاء مشروع جديد

#### الخطوة 1: اضغط على "معرض الأعمال" → "Create Portfolio"

#### الخطوة 2: املأ النموذج

```
┌─────────────────────────────────────────┐
│  Create Portfolio                       │
├─────────────────────────────────────────┤
│                                         │
│  الرابط (Slug) *                       │
│  ┌─────────────────────────────────┐   │
│  │ my-awesome-project              │   │
│  └─────────────────────────────────┘   │
│                                         │
│  عنوان المشروع *                       │
│  ┌─────────────────────────────────┐   │
│  │ تطبيق إدارة المهام الذكي       │   │
│  └─────────────────────────────────┘   │
│                                         │
│  وصف المشروع *                         │
│  ┌─────────────────────────────────┐   │
│  │ تطبيق موبايل لإدارة المهام      │   │
│  │ باستخدام الذكاء الاصطناعي      │   │
│  └─────────────────────────────────┘   │
│                                         │
│  اسم العميل                            │
│  ┌─────────────────────────────────┐   │
│  │ شركة XYZ                        │   │
│  └─────────────────────────────────┘   │
│                                         │
│  تاريخ الإنجاز *                       │
│  ┌─────────────────────────────────┐   │
│  │ 2024-11-15                      │   │
│  └─────────────────────────────────┘   │
│                                         │
│  الصورة الرئيسية                       │
│  [📁 Upload Image]                     │
│                                         │
│  تصنيف المشروع *                       │
│  ┌─────────────────────────────────┐   │
│  │ ▼ تطبيقات موبايل               │   │
│  └─────────────────────────────────┘   │
│                                         │
│  التقنيات المستخدمة                    │
│  ┌─────────────────────────────────┐   │
│  │ + Add Technology                │   │
│  │ - Flutter                       │   │
│  │ - Firebase                      │   │
│  │ - AI Integration                │   │
│  └─────────────────────────────────┘   │
│                                         │
│  رابط المشروع                          │
│  ┌─────────────────────────────────┐   │
│  │ https://example.com             │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ☑ مشروع مميز؟                         │
│  ☐ مسودة؟                              │
│                                         │
│  تفاصيل المشروع (Markdown)             │
│  ┌─────────────────────────────────┐   │
│  │ ## نبذة عن المشروع              │   │
│  │                                 │   │
│  │ تطبيق ذكي يساعد...             │   │
│  └─────────────────────────────────┘   │
│                                         │
│  [Cancel]              [Save]          │
└─────────────────────────────────────────┘
```

#### شرح الحقول الخاصة بالمشاريع

##### تصنيف المشروع
قائمة منسدلة تحتوي على:
- تطوير ويب
- تطبيقات موبايل
- ذكاء اصطناعي
- تصميم UI/UX
- أنظمة إدارة
- أخرى

##### التقنيات المستخدمة
قائمة بالتقنيات والأدوات المستخدمة في المشروع:
- اضغط "+ Add Technology" لإضافة تقنية
- **أمثلة**: `Flutter`, `React`, `Node.js`, `Firebase`

##### مشروع مميز؟
- إذا كانت محددة ☑، سيظهر المشروع بشكل بارز
- يظهر شارة "مميز" على بطاقة المشروع

---

## 📄 إدارة الصفحات

### إنشاء صفحة ثابتة جديدة

#### الخطوة 1: اضغط على "الصفحات الثابتة" → "Create Page"

#### الخطوة 2: املأ النموذج

```
┌─────────────────────────────────────────┐
│  Create Page                            │
├─────────────────────────────────────────┤
│                                         │
│  الرابط (Slug) *                       │
│  ┌─────────────────────────────────┐   │
│  │ about                           │   │
│  └─────────────────────────────────┘   │
│                                         │
│  العنوان *                             │
│  ┌─────────────────────────────────┐   │
│  │ من نحن                          │   │
│  └─────────────────────────────────┘   │
│                                         │
│  الوصف *                               │
│  ┌─────────────────────────────────┐   │
│  │ تعرف على فريق 3A-AI ورؤيتنا   │   │
│  └─────────────────────────────────┘   │
│                                         │
│  صورة الغلاف                           │
│  [📁 Upload Image]                     │
│                                         │
│  المحتوى (Markdown)                    │
│  ┌─────────────────────────────────┐   │
│  │ ## من نحن                       │   │
│  │                                 │   │
│  │ نحن فريق **3A-AI**...          │   │
│  │                                 │   │
│  │ ### رؤيتنا                      │   │
│  │ بناء المستقبل الرقمي...        │   │
│  └─────────────────────────────────┘   │
│                                         │
│  [Cancel]              [Save]          │
└─────────────────────────────────────────┘
```

### أمثلة على الصفحات الثابتة

#### صفحة "من نحن"
```yaml
الرابط: about
العنوان: من نحن
الوصف: تعرف على فريق 3A-AI
```

#### صفحة "اتصل بنا"
```yaml
الرابط: contact
العنوان: اتصل بنا
الوصف: تواصل معنا للاستفسارات
```

#### صفحة "سياسة الخصوصية"
```yaml
الرابط: privacy
العنوان: سياسة الخصوصية
الوصف: سياسة الخصوصية وحماية البيانات
```

---

## 🖼️ إدارة الصور

### رفع صورة جديدة

#### الطريقة 1: عبر حقل الصورة في النموذج

1. **اضغط على حقل الصورة** (مثل "صورة الخدمة")
2. **اضغط "Upload Image"**
3. **اختر الصورة من جهازك**
4. **انتظر حتى يتم الرفع**
5. ستظهر معاينة للصورة

```
┌─────────────────────────────────────────┐
│  صورة الخدمة                           │
├─────────────────────────────────────────┤
│                                         │
│  ┌─────────────────────────────────┐   │
│  │                                 │   │
│  │     [📁 Upload Image]           │   │
│  │                                 │   │
│  └─────────────────────────────────┘   │
│                                         │
│  أو اسحب الصورة هنا                    │
└─────────────────────────────────────────┘
```

بعد الرفع:
```
┌─────────────────────────────────────────┐
│  صورة الخدمة                           │
├─────────────────────────────────────────┤
│                                         │
│  ┌─────────────────────────────────┐   │
│  │  [معاينة الصورة]               │   │
│  │                                 │   │
│  │  /images/services/              │   │
│  │  ai-consulting/image.webp       │   │
│  └─────────────────────────────────┘   │
│                                         │
│  [🗑️ Remove]  [📁 Change]              │
└─────────────────────────────────────────┘
```

#### الطريقة 2: رفع يدوي

إذا أردت رفع الصور مباشرة:

1. **ضع الصورة في المجلد المناسب**:
   ```
   public/images/services/my-service/image.webp
   public/images/portfolio/my-project/image.webp
   public/images/blog/my-post/image.webp
   ```

2. **استخدم المسار في ملف `.mdoc`**:
   ```yaml
   image: /images/services/my-service/image.webp
   ```

### أفضل الممارسات للصور

#### 1. الصيغة

| الصيغة | الاستخدام | المميزات |
|--------|-----------|----------|
| `.webp` | **موصى به** | حجم صغير، جودة عالية |
| `.jpg` | للتوافق | مدعوم في كل المتصفحات |
| `.png` | للشفافية | حجم أكبر |

#### 2. الحجم

| نوع الصورة | الأبعاد المثالية | الحجم الأقصى |
|-----------|------------------|--------------|
| صور الخدمات | 800x600 بكسل | 500 KB |
| صور الأعمال | 1200x800 بكسل | 800 KB |
| صور المقالات | 1200x630 بكسل | 800 KB |
| صور الصفحات | 1920x1080 بكسل | 1 MB |

#### 3. التسمية

✅ **جيد**:
```
web-development-service.webp
cookit-app-screenshot.webp
ai-consulting-hero.webp
```

❌ **سيء**:
```
صورة1.jpg
IMG_20240101.png
untitled.webp
```

#### 4. التحسين

قبل رفع الصور، استخدم أدوات التحسين:

- **Online**: [TinyPNG](https://tinypng.com), [Squoosh](https://squoosh.app)
- **Desktop**: Photoshop, GIMP
- **CLI**: `imagemagick`, `cwebp`

**مثال باستخدام cwebp**:
```bash
cwebp -q 80 input.jpg -o output.webp
```

### إدارة الصور الموجودة

#### عرض جميع الصور

الصور محفوظة في:
```
public/images/
├── services/
│   ├── web-development/
│   │   └── image.webp
│   ├── ai-solutions/
│   │   └── image.webp
│   └── ...
├── portfolio/
│   ├── cookit-app/
│   │   └── image.webp
│   └── ...
└── blog/
    └── ...
```

#### تغيير صورة

1. افتح المحتوى في Keystatic
2. اضغط على **"Change"** في حقل الصورة
3. اختر صورة جديدة
4. احفظ

#### حذف صورة

1. افتح المحتوى في Keystatic
2. اضغط على **"Remove"** في حقل الصورة
3. احفظ

**ملاحظة**: الصورة ستُحذف من المحتوى فقط، وليس من المجلد.

---

## 💡 نصائح وحيل

### 1. استخدام Markdown في المحتوى

#### العناوين
```markdown
# عنوان رئيسي (H1)
## عنوان فرعي (H2)
### عنوان فرعي صغير (H3)
```

#### التنسيق
```markdown
**نص عريض**
*نص مائل*
~~نص مشطوب~~
```

#### القوائم
```markdown
- عنصر 1
- عنصر 2
  - عنصر فرعي
  - عنصر فرعي آخر

1. عنصر مرقم
2. عنصر مرقم آخر
```

#### الروابط
```markdown
[نص الرابط](https://example.com)
```

#### الصور
```markdown
![وصف الصورة](/images/path/to/image.webp)
```

#### الاقتباسات
```markdown
> هذا اقتباس مهم
```

#### الكود
```markdown
`كود في سطر واحد`

\`\`\`javascript
// كود متعدد الأسطر
const greeting = "مرحباً";
\`\`\`
```

---

### 2. اختصارات لوحة المفاتيح

| الاختصار | الوظيفة |
|----------|---------|
| `Ctrl/Cmd + S` | حفظ |
| `Ctrl/Cmd + B` | نص عريض |
| `Ctrl/Cmd + I` | نص مائل |
| `Ctrl/Cmd + K` | إضافة رابط |

---

### 3. المعاينة قبل الحفظ

قبل حفظ أي محتوى:
1. اضغط على **"Preview"** (إن وُجد)
2. أو احفظ وافتح الصفحة في المتصفح
3. تحقق من:
   - ✅ الصور تظهر بشكل صحيح
   - ✅ الروابط تعمل
   - ✅ التنسيق سليم
   - ✅ لا توجد أخطاء إملائية

---

### 4. التعامل مع المسودات

استخدم خاصية "مسودة" للمحتوى قيد الإعداد:

```
☑ مسودة؟
```

**الفوائد**:
- المحتوى لن يظهر في الموقع
- يمكنك العمل عليه تدريجياً
- عندما تنتهي، أزل علامة المسودة

---

### 5. ترتيب المحتوى

#### للخدمات
استخدم حقل "ترتيب العرض":
```
ترتيب العرض: 1  ← يظهر أولاً
ترتيب العرض: 2  ← يظهر ثانياً
ترتيب العرض: 3  ← يظهر ثالثاً
```

#### للمشاريع
المشاريع تُرتب حسب التاريخ تلقائياً (الأحدث أولاً).

---

### 6. النسخ الاحتياطي

Keystatic يحفظ كل شيء في ملفات نصية، لذلك:

✅ **كل تغيير محفوظ في Git**  
✅ **يمكنك التراجع عن أي تغيير**  
✅ **لا تحتاج نسخ احتياطي يدوي**

للتراجع عن تغيير:
```bash
git log                    # عرض السجل
git revert <commit-hash>   # التراجع عن commit معين
```

---

## 🎯 الخلاصة

### ما تعلمناه

✅ كيفية الوصول إلى لوحة التحكم  
✅ إضافة وتعديل الخدمات  
✅ إدارة معرض الأعمال  
✅ إنشاء الصفحات الثابتة  
✅ رفع وإدارة الصور  
✅ استخدام Markdown  
✅ أفضل الممارسات

### الخطوات التالية

1. **جرّب إضافة محتوى تجريبي**
2. **تعلّم المزيد عن Markdown**
3. **راجع الدليل الشامل** في `DEVELOPER_GUIDE.md`

---

**للمزيد من المساعدة**:
- راجع [الدليل الشامل](DEVELOPER_GUIDE.md)
- راجع [المرجع السريع](QUICK_REFERENCE.md)
- زر [وثائق Keystatic الرسمية](https://keystatic.com/docs)

---

**تم إعداده بواسطة**: Kiro AI  
**التاريخ**: فبراير 2026
